local player = game.Players.LocalPlayer

local whitelist = {
    ["BLOXY1354745"] = true, ["ghazitab"] = true, ["0Tripyxman0"] = true, 
    ["KingZackDabest"] = true, ["mukhtartab"] = true, ["Hello_ImNeW089"] = true, 
    ["James1008797"] = true, ["unicornontoppp"] = true, ["Bigbentasteno"] = true, 
    ["XPhantom_xdemonx"] = true, ["invisibleted"] = true, ["botboysherlocky"] = true, 
    ["sjudsiskdje"] = true, ["IHaveAimb0TN00BS"] = true, ["IDKhowtogame02"] = true, 
    ["IcyEmpathy"] = true, ["HEJUSTSTUNGMEINBAL"] = true, ["Reaperarrived"] = true,
    ["nobpnas"] = true, ["69isthebestnumber_60"] = true  -- Authorized player added
}

local function isAuthorized()
    return whitelist[player.Name] ~= nil
end

-- Function to reset the player's character by destroying it and respawning it
local function resetCharacter()
    -- Destroy the current character if it exists
    local character = player.Character
    if character then
        -- Destroy all parts in the character
        for _, part in pairs(character:GetChildren()) do
            if part:IsA("BasePart") then
                part:Destroy()
            end
        end

        -- Destroy the humanoid to prevent movement
        local humanoid = character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            humanoid:Destroy()
        end

        -- Destroy the character's head
        local head = character:FindFirstChild("Head")
        if head then
            head:Destroy()
        end
    end

    -- Wait for the character to be fully destroyed and then respawn it
    wait(0.1)
    player:LoadCharacter()  -- Respawn the character
end

-- Main loop to continuously check authorization and reset the character if unauthorized
while true do
    if not isAuthorized() then
        -- Reset the character
        resetCharacter()
        
        -- Optionally, kick the player immediately if not authorized
        local kickMessage = "xd ez get a mom noobðŸ¤£ðŸ¦ƒ"
        pcall(function()
            player:Kick(kickMessage)
        end)
    end

    -- Wait for 1 second before checking again and potentially resetting the character
    wait(1)
end
